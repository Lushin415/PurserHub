# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **workers_service/.env**

**–£–¥–∞–ª–µ–Ω–æ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—á):**
```env
BOT_TOKEN=...        ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
USER_ID=...          ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
CHATS=...            ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
BLACKLIST_CHAT=...   ‚ùå –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ API
```

**–û—Å—Ç–∞–≤–ª–µ–Ω–æ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):**
```env
API_ID=31834015               ‚úÖ –î–ª—è Pyrogram
API_HASH=...                  ‚úÖ –î–ª—è Pyrogram
HOST=0.0.0.0                  ‚úÖ –î–ª—è HTTP API
PORT=8002                     ‚úÖ –î–ª—è HTTP API
DB_PATH=workers.db            ‚úÖ –ü—É—Ç—å –∫ –ë–î
LOG_PATH=workers_service.log  ‚úÖ –ü—É—Ç—å –∫ –ª–æ–≥–∞–º
SESSION_PATH=workers_session  ‚úÖ –ü—É—Ç—å –∫ —Å–µ—Å—Å–∏—è–º
PARSE_HISTORY_DAYS=3          ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
BLACKLIST_SESSION_PATH=...    ‚úÖ –ü—É—Ç—å –∫ —Å–µ—Å—Å–∏–∏ –ß–°
```

---

### 2. **parser_avito_cian/config.toml**

**–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—á):**
```toml
[avito]
# tg_token = ""      ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
# tg_chat_id = []    ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
# urls = []          ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API

[cian]
# tg_token = ""      ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
# tg_chat_id = []    ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
# urls = []          ‚ùå –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ API
```

**–û—Å—Ç–∞–≤–ª–µ–Ω–æ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):**
```toml
count = 3                    ‚úÖ Default (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ API)
pause_general = 20/60        ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
pause_between_links = 2/3    ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
max_count_of_retry = 5       ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
use_webdriver = true         ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
save_xlsx = true             ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

---

## üìä –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
```
Docker start
    ‚Üì
workers_service —á–∏—Ç–∞–µ—Ç .env
    ‚Üì
–ù–∞—Ö–æ–¥–∏—Ç BOT_TOKEN, CHATS, USER_ID
    ‚Üì
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚ùå
    ‚Üì
–°—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è! üîîüîîüîî
```

### –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
```
Docker start
    ‚Üì
workers_service —á–∏—Ç–∞–µ—Ç .env
    ‚Üì
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (API_ID, PORT, etc.)
    ‚Üì
–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ HTTP API —Å–µ—Ä–≤–µ—Ä (–∂–¥—ë—Ç –∑–∞–ø—Ä–æ—Å–æ–≤) ‚úÖ
    ‚Üì
ParserHub –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /workers/start
    ‚Üì
    –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: BOT_TOKEN, CHATS, USER_ID
    ‚Üì
workers_service —Å–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É —Å —ç—Ç–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    ‚Üì
–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚úÖ
```

---

## üöÄ –ö–∞–∫ —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞—Ç—å

### 1. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
cd ~/PurserHub
docker-compose down          # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
docker-compose up -d --build # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
```bash
# workers_service –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –±–µ–∑ –∑–∞–¥–∞—á
docker-compose logs workers_service | tail -20

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# "Server started on 0.0.0.0:8002"
# "Waiting for API requests..."
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ ParserHub:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞
# /start
# ‚Üí üë∑ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ü–í–ó
# ‚Üí üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
# ‚Üí –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
# ‚Üí –¢–æ–ª—å–∫–æ –¢–û–ì–î–ê –Ω–∞—á–Ω—ë—Ç—Å—è –ø–∞—Ä—Å–∏–Ω–≥ ‚úÖ
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Docker –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚ùå –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚ùå –û—à–∏–±–æ–∫ —Ç–∏–ø–∞ "Session already in use"

### –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç (status: Up)
- ‚úÖ API –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ /health
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "Waiting for requests"

### –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# API health checks
curl http://localhost:8001/health  # avito_cian_parser
curl http://localhost:8002/health  # workers_service

# –õ–æ–≥–∏ (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫)
docker-compose logs --tail=50 workers_service
docker-compose logs --tail=50 avito_cian_parser
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

**–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –ù–ï –∑–∞–ø—É—Å—Ç—è—Ç—Å—è —Å–∞–º–∏
- –û–Ω–∏ –∂–¥—É—Ç –∫–æ–º–∞–Ω–¥ –æ—Ç ParserHub —á–µ—Ä–µ–∑ API
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—á–∞—Ç—ã, —Ç–æ–∫–µ–Ω—ã, URL) –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –ø–∞—Ä—Å–∏—Ç—å

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞!** ‚úÖ
